(()=>{"use strict";const t="http://localhost:8080",s=`${t}/catalog.json`,n=`${t}/cart.json`,o=`${t}/add`,e=`${t}/delete`,i={data:function(){return{classList:["button"]}},template:'\n        <button :class="classList" type="button" @click="$emit(\'click\')">\n          <slot></slot>\n        </button>\n      '};new Vue({el:"#app",data:{goods:[],filteredGoods:[],cart:[],search:""},components:{cart:{data:function(){return{cartPopupVision:!1,classList:["cart"],buttonClassList:["button_style_main"],menuClassList:["cart__pop-up-menu"]}},components:{customButton:i,popUpMenu:{data:function(){return{classList:["pup-up-menu"],buttonClassList:["button_style_close","pup-up-menu__close-button"]}},components:{customButton:i},template:'\n      <div :class="classList">\n        <custom-button :class="buttonClassList" @click="$emit(\'close\')">\n          &#128939;\n        </custom-button>\n        <slot></slot>\n      </div>\n    '}},template:'\n      <div :class="classList">\n        <custom-button :class="buttonClassList" @click="open">\n          Корзина\n        </custom-button>\n        <pop-up-menu :class="menuClassList" v-if="cartPopupVision" @close="close">\n          <slot></slot>\n        </pop-up-menu>\n      </div>\n    ',methods:{open:function(){this.cartPopupVision=!0},close:function(){this.cartPopupVision=!1}}},cartGoodsItem:{props:{title:String,quantity:Number,amount:Number},data:function(){return{classList:["cart__goods-item"],titleClassList:["cart-goods-item","cart-goods-item__title"],buttonClassList:["button_style_second","cart-goods-item__del-button"]}},components:{customButton:i},template:'\n      <div :class="classList">\n        <div :class="titleClassList">{{ title }}</div>\n        <div>{{quantity}} шт.</div>\n        <div>{{ amount }}</div>\n        <custom-button :class="buttonClassList" @click="$emit(\'remove-item\')">\n          Удалить\n        </custom-button>\n      </div>\n    '},goodsItem:{props:{title:String,price:Number},data:function(){return{classList:["goods-item"],titleClassList:["goods-item__title"],priceClassList:["goods-item__price"],buttonClassList:["button_style_second","button_add"]}},components:{customButton:i},template:'\n      <div :class="classList">\n        <h3 :class="titleClassList">{{ title }}</h3>\n        <custom-button :class="buttonClassList" @click="$emit(\'add-to-cart\')">\n          Добавить\n        </custom-button>\n        <p :class="priceClassList">{{ price }}</p>\n      </div>\n    '},goodsList:{data:function(){return{classList:["goods-list"]}},template:'\n      <div :class="classList">\n        <slot></slot>\n      </div>\n    '},searchForm:{data:function(){return{classList:["search-form"],inputClassList:["search-form__input-field"],buttonClassList:["button_style_main","search-form__button"]}},components:{customButton:i},template:'\n      <div :class="classList">\n        <input\n          :class="inputClassList"\n          type="text"\n          v-on:input="$emit(\'input\', $event.target.value)"\n        />\n        <custom-button :class="buttonClassList" @click="$emit(\'search\')">\n          Найти\n        </custom-button>\n      </div>\n    '}},methods:{filterGoods:function(){this.filteredGoods=this.goods.filter((t=>new RegExp(this.search,"i").test(t.product_name)))},getCart:function(){return fetch(n).then((t=>t.json()))},getGoods:function(){return fetch(s).then((t=>t.json()))},addToCart:function(t){return fetch(o,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((t=>t.json())).then((t=>this.cart=t))},removeFromCart:function(t){return fetch(e,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((t=>t.json())).then((t=>this.cart=t))}},mounted:function(){this.getGoods().then((t=>{this.goods=t,this.filteredGoods=t})),this.getCart().then((t=>this.cart=t))}})})();